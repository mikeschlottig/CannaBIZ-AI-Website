<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CannaBIZ AI - The OS for Cannabis Retail</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #e2e8f0; }
        .tech-tag { font-family: 'Source Code Pro', monospace; }
        .gradient-text { background: -webkit-linear-gradient(45deg, #4ade80, #86efac); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .component { transition: all 0.2s ease-in-out; cursor: pointer; border: 1px solid #334155; }
        .component:hover { border-color: #4ade80; transform: translateY(-2px); }
        .component.active { background-color: #1e293b; border-color: #86efac; box-shadow: 0 0 15px rgba(74, 222, 128, 0.3); }
        .connector-line { stroke: #475569; stroke-width: 1.5; transition: all 0.3s ease; }
        .connector-line.active { stroke: #86efac; stroke-width: 2.5; }
        .info-panel { scrollbar-width: thin; scrollbar-color: #475569 #1e293b; }
        .info-panel::-webkit-scrollbar { width: 8px; }
        .info-panel::-webkit-scrollbar-track { background: #1e293b; }
        .info-panel::-webkit-scrollbar-thumb { background-color: #475569; border-radius: 10px; border: 3px solid #1e293b; }
        .doc-card { transition: all 0.2s ease-in-out; }
        .doc-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(74, 222, 128, 0.1), 0 4px 6px -2px rgba(74, 222, 128, 0.05); }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header id="header" class="bg-slate-900/80 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-800">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="text-2xl font-bold flex items-center gap-2">
                <span class="text-green-400">🌿</span>
                <span class="text-white">CannaBIZ AI</span>
            </a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#home" class="text-slate-300 hover:text-green-400 transition">Home</a>
                <a href="#roadmap" class="text-slate-300 hover:text-green-400 transition">Roadmap</a>
                <a href="#tech" class="text-slate-300 hover:text-green-400 transition">Tech Vision</a>
                <a href="#invest" class="text-slate-300 hover:text-green-400 transition">Invest</a>
            </div>
            <a href="#invest" class="hidden md:block bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition">
                Contact Us
            </a>
            <button id="mobile-menu-button" class="md:hidden text-white">
                <i data-lucide="menu"></i>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#home" class="block text-slate-300 hover:text-green-400 transition">Home</a>
            <a href="#roadmap" class="block text-slate-300 hover:text-green-400 transition">Roadmap</a>
            <a href="#tech" class="block text-slate-300 hover:text-green-400 transition">Tech Vision</a>
            <a href="#invest" class="block text-slate-300 hover:text-green-400 transition">Invest</a>
        </div>
    </header>

    <main>
        <!-- Section 1: Home / The Pitch -->
        <section id="home" class="py-20 md:py-32">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight">
                    The AI-Powered <span class="gradient-text">Operating System</span><br> for Cannabis Retail
                </h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg md:text-xl text-slate-400">
                    CannaBIZ AI is a compliance-first ERP & CRM that unifies your data, automates marketing, and delivers predictive insights to grow your revenue in a complex market.
                </p>
                <div class="mt-10 flex justify-center gap-4">
                    <a href="#roadmap" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg transition text-lg">View Product Roadmap</a>
                    <a href="#invest" class="bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 px-8 rounded-lg transition text-lg">Investment Opportunity</a>
                </div>
            </div>

            <!-- The Problem & Opportunity -->
            <div class="container mx-auto px-6 mt-24 md:mt-32">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-3xl font-bold text-white">The <span class="text-red-400">Challenge</span> for Retailers in 2025</h2>
                        <p class="mt-4 text-slate-400">The legal cannabis market is projected to surpass **$61 billion by 2026**, yet retailers are being crushed by complexity. They face a daily battle against:</p>
                        <ul class="mt-6 space-y-4">
                            <li class="flex items-start gap-3"><i data-lucide="shield-alert" class="text-red-400 w-6 h-6 flex-shrink-0 mt-1"></i><span><strong class="text-white">Fragmented Compliance:</strong> A confusing, state-by-state patchwork of regulations creates constant risk and operational overhead.</span></li>
                            <li class="flex items-start gap-3"><i data-lucide="dollar-sign" class="text-red-400 w-6 h-6 flex-shrink-0 mt-1"></i><span><strong class="text-white">Banking & Tax Burdens:</strong> Lack of access to traditional banking and punitive tax codes like 280E squeeze already thin margins.</span></li>
                            <li class="flex items-start gap-3"><i data-lucide="swords" class="text-red-400 w-6 h-6 flex-shrink-0 mt-1"></i><span><strong class="text-white">Fierce Competition:</strong> Squeezed by large MSOs and the illicit market, independent retailers struggle to differentiate and retain customers.</span></li>
                        </ul>
                    </div>
                    <div class="bg-slate-800/50 p-8 rounded-xl border border-slate-700">
                        <h2 class="text-3xl font-bold text-white">The <span class="gradient-text">Solution</span> is Intelligence</h2>
                        <p class="mt-4 text-slate-400">CannaBIZ AI is the first platform built from the ground up to solve these specific challenges. We turn complexity into a competitive advantage by:</p>
                         <ul class="mt-6 space-y-4">
                            <li class="flex items-start gap-3"><i data-lucide="brain-circuit" class="text-green-400 w-6 h-6 flex-shrink-0 mt-1"></i><span><strong class="text-white">Unifying Data:</strong> Connecting Shopify, inventory, and customer data into a single source of truth.</span></li>
                            <li class="flex items-start gap-3"><i data-lucide="bot" class="text-green-400 w-6 h-6 flex-shrink-0 mt-1"></i><span><strong class="text-white">Automating Engagement:</strong> Using AI to send compliant, personalized marketing that actually works.</span></li>
                            <li class="flex items-start gap-3"><i data-lucide="trending-up" class="text-green-400 w-6 h-6 flex-shrink-0 mt-1"></i><span><strong class="text-white">Predicting the Future:</strong> Forecasting churn, LTV, and inventory needs so you can act proactively, not reactively.</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        ---

        <!-- Section 2: Roadmap & Demo -->
        <section id="roadmap" class="py-20 md:py-24 bg-slate-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-white">Product Roadmap to Launch</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-400">Our iterative, five-phase plan is designed to deliver value quickly while building a robust, enterprise-ready platform.</p>
                </div>

                <!-- Roadmap Phases -->
                <div class="relative">
                    <!-- Timeline Line -->
                    <div class="hidden md:block absolute top-5 left-1/2 w-0.5 h-full bg-slate-700 -translate-x-1/2"></div>
                    
                    <!-- Phase 1 -->
                    <div class="md:grid md:grid-cols-2 md:gap-12 mb-12">
                        <div class="text-center md:text-right">
                            <div class="bg-slate-800 border border-slate-700 p-6 rounded-xl inline-block">
                                <h3 class="text-xl font-bold text-green-400">Phase 1: Foundation & MVP</h3>
                                <p class="text-sm text-slate-400">Aug - Oct 2025</p>
                                <ul class="mt-4 text-left space-y-2 text-slate-300">
                                    <li>✅ Core CRM & Shopify Sync</li>
                                    <li>✅ BI Dashboard (Descriptive)</li>
                                    <li>✅ Onboard 5-10 Pilot Customers</li>
                                </ul>
                            </div>
                        </div>
                        <div class="hidden md:block"></div>
                    </div>
                    <!-- Phase 2 -->
                    <div class="md:grid md:grid-cols-2 md:gap-12 mb-12">
                         <div class="hidden md:block"></div>
                        <div class="text-center md:text-left">
                            <div class="bg-slate-800 border border-slate-700 p-6 rounded-xl inline-block">
                                <h3 class="text-xl font-bold text-green-400">Phase 2: Intelligence Layer</h3>
                                <p class="text-sm text-slate-400">Nov 2025 - Jan 2026</p>
                                <ul class="mt-4 text-left space-y-2 text-slate-300">
                                    <li>🧠 Deploy Python Analytics Engine</li>
                                    <li>📈 Churn & LTV Prediction Models</li>
                                    <li>💡 Populate UI with AI Insights</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Phase 3 -->
                    <div class="md:grid md:grid-cols-2 md:gap-12 mb-12">
                        <div class="text-center md:text-right">
                            <div class="bg-slate-800 border border-slate-700 p-6 rounded-xl inline-block">
                                <h3 class="text-xl font-bold text-green-400">Phase 3: Autonomous Engagement</h3>
                                <p class="text-sm text-slate-400">Feb - Apr 2026</p>
                                <ul class="mt-4 text-left space-y-2 text-slate-300">
                                    <li>🎯 Personalized Promotion Engine</li>
                                    <li>💬 SMS Campaign Builder (Twilio)</li>
                                    <li>📦 Inventory Hub & Strategy AI</li>
                                </ul>
                            </div>
                        </div>
                         <div class="hidden md:block"></div>
                    </div>
                     <!-- Phase 4 -->
                    <div class="md:grid md:grid-cols-2 md:gap-12 mb-12">
                        <div class="hidden md:block"></div>
                        <div class="text-center md:text-left">
                           <div class="bg-slate-800 border border-slate-700 p-6 rounded-xl inline-block">
                                <h3 class="text-xl font-bold text-green-400">Phase 4: Enterprise Readiness</h3>
                                <p class="text-sm text-slate-400">May - Jul 2026</p>
                                <ul class="mt-4 text-left space-y-2 text-slate-300">
                                    <li>🛡️ Pen Testing & SOC 2 Prep</li>
                                    <li>💳 Stripe Billing Integration</li>
                                    <li>⚙️ Self-Service Onboarding</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Phase 5 -->
                    <div class="md:grid md:grid-cols-2 md:gap-12">
                        <div class="text-center md:text-right">
                            <div class="bg-slate-800 border border-slate-700 p-6 rounded-xl inline-block">
                                <h3 class="text-xl font-bold text-green-400">Phase 5: Public Launch & Growth</h3>
                                <p class="text-sm text-slate-400">Aug 2026 & Beyond</p>
                                <ul class="mt-4 text-left space-y-2 text-slate-300">
                                    <li>🚀 Public Launch (Target 100+ customers)</li>
                                    <li>📱 Mobile App (React Native) v1</li>
                                    <li>🤝 Partner API Program</li>
                                </ul>
                            </div>
                        </div>
                        <div class="hidden md:block"></div>
                    </div>
                </div>

                <!-- Interactive Demo -->
                <div class="mt-24">
                    <h2 class="text-center text-3xl font-bold text-white mb-8">Interactive Dashboard Prototype</h2>
                    <div class="max-w-6xl mx-auto bg-slate-800/50 p-4 sm:p-6 md:p-8 rounded-2xl border border-slate-700">
                        <!-- Dashboard HTML embed -->
                        <div style="font-family: 'Inter', sans-serif; background-color: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 15px; border-bottom: 1px solid #334155; margin-bottom: 15px;">
                                <h1 style="font-size: 20px; font-weight: bold; color: #4ade80;">🌿 CannaBIZ AI</h1>
                                <div style="display: flex; align-items: center; gap: 15px; color: #cbd5e1;">
                                    <span>🔔 3</span>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 32px; height: 32px; background-color: #4ade80; border-radius: 50%; color: #020617; display: flex; align-items: center; justify-content: center; font-weight: bold;">JD</div>
                                        <span>John Doe</span>
                                    </div>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 20px;">
                                <div style="background: #334155; padding: 20px; border-radius: 8px; border-left: 4px solid #4ade80;">
                                    <h3 style="font-size: 14px; color: #94a3b8; margin: 0 0 10px 0;">DAILY REVENUE</h3>
                                    <p style="font-size: 28px; font-weight: bold; margin: 0; color: white;">$12,847 <span style="font-size: 14px; color: #4ade80;">▲ 8%</span></p>
                                </div>
                                <div style="background: #334155; padding: 20px; border-radius: 8px; border-left: 4px solid #f87171;">
                                    <h3 style="font-size: 14px; color: #94a3b8; margin: 0 0 10px 0;">TRUE MARGIN %</h3>
                                    <p style="font-size: 28px; font-weight: bold; margin: 0; color: white;">31.2% <span style="font-size: 14px; color: #f87171;">▼ 2.1%</span></p>
                                </div>
                                <div style="background: #334155; padding: 20px; border-radius: 8px; border-left: 4px solid #4ade80;">
                                    <h3 style="font-size: 14px; color: #94a3b8; margin: 0 0 10px 0;">CUSTOMER LTV</h3>
                                    <p style="font-size: 28px; font-weight: bold; margin: 0; color: white;">$847 <span style="font-size: 14px; color: #4ade80;">▲ 15%</span></p>
                                </div>
                                <div style="background: #334155; padding: 20px; border-radius: 8px; border-left: 4px solid #fbbf24;">
                                    <h3 style="font-size: 14px; color: #94a3b8; margin: 0 0 10px 0;">INVENTORY T/O</h3>
                                    <p style="font-size: 28px; font-weight: bold; margin: 0; color: white;">2.3x <span style="font-size: 14px; color: #94a3b8;">- 0.1%</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        ---

        <!-- Section 3: Tech Vision -->
        <section id="tech" class="py-20 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-white">Technical Vision & Architecture</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-400">Our platform is built on a modern, scalable, and secure stack designed for enterprise-grade performance. Explore the interactive diagram to see how it all connects.</p>
                </div>
                <!-- Interactive Wiring Diagram -->
                <div id="wiring-diagram-container" class="bg-slate-900/50 p-4 sm:p-6 rounded-2xl border border-slate-700">
                    <!-- Wiring Diagram HTML will be injected here by JS -->
                </div>

                <!-- Documentation Gateway -->
                <div class="mt-24">
                    <h2 class="text-center text-3xl font-bold text-white mb-8">Documentation Gateway</h2>
                    <p class="text-center max-w-2xl mx-auto text-slate-400 mb-12">Our frontend is built with a robust, reusable component library. This not only speeds up development but ensures a consistent, high-quality user experience. Explore some of our core components.</p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto" id="doc-gateway">
                        <!-- Doc cards will be injected here -->
                    </div>
                </div>
            </div>
        </section>

        ---

        <!-- Section 4: Invest -->
        <section id="invest" class="py-20 md:py-24 bg-slate-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-white">Join Us in Building the Future of Cannabis Retail</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-400">We are raising a seed round to accelerate our product development, expand our team, and capture a first-mover advantage in a rapidly growing market.</p>
                </div>
                <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                    <div class="bg-slate-800/50 p-8 rounded-xl border border-slate-700">
                        <h3 class="text-2xl font-bold gradient-text">The Ask</h3>
                        <p class="text-5xl font-extrabold text-white mt-4">$2M</p>
                        <p class="text-slate-400">Seed Round</p>
                    </div>
                    <div class="bg-slate-800/50 p-8 rounded-xl border border-slate-700">
                        <h3 class="text-2xl font-bold text-white">Use of Funds</h3>
                        <ul class="mt-4 space-y-3 text-slate-300">
                            <li><span class="font-bold text-green-400">50%</span> - Engineering & Product Development</li>
                            <li><span class="font-bold text-green-400">30%</span> - Sales, Marketing & Onboarding</li>
                            <li><span class="font-bold text-green-400">20%</span> - Operations & Compliance</li>
                        </ul>
                    </div>
                </div>
                <div class="max-w-4xl mx-auto mt-8 bg-slate-800/50 p-8 rounded-xl border border-slate-700">
                     <h3 class="text-2xl font-bold text-white text-center mb-6">Key Investor Metrics (12-Month Targets)</h3>
                     <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                        <div>
                            <p class="text-3xl font-bold gradient-text">$2M+</p>
                            <p class="text-slate-400">ARR</p>
                        </div>
                         <div>
                            <p class="text-3xl font-bold gradient-text">100+</p>
                            <p class="text-slate-400">Paying Customers</p>
                        </div>
                         <div>
                            <p class="text-3xl font-bold gradient-text">4:1</p>
                            <p class="text-slate-400">LTV to CAC Ratio</p>
                        </div>
                         <div>
                            <p class="text-3xl font-bold gradient-text">&lt;12 mo</p>
                            <p class="text-slate-400">CAC Payback</p>
                        </div>
                     </div>
                </div>
                <div class="text-center mt-16">
                    <h3 class="text-2xl font-bold text-white">Let's Connect</h3>
                    <p class="mt-2 text-slate-400">We believe CannaBIZ AI has the potential to be a category-defining company. <br>If you share our vision, we'd love to talk.</p>
                    <button id="request-deck-button" class="mt-6 inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg transition text-lg">
                        Request Pitch Deck
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer class="border-t border-slate-800 py-8">
        <div class="container mx-auto px-6 text-center text-slate-500">
            <p>&copy; 2025 CannaBIZ AI, Inc. All rights reserved.</p>
        </div>
    </footer>

    <!-- Pitch Deck Request Modal -->
    <div id="pitch-deck-modal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
        <div id="pitch-deck-modal-content" class="bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700 relative">
           <button id="pitch-deck-modal-close" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i data-lucide="x"></i></button>
           <div id="form-container">
               <h2 class="text-2xl font-bold text-white mb-4">Request Access</h2>
               <p class="text-slate-400 mb-6">Enter your details to receive our investor pitch deck.</p>
               <form id="pitch-deck-form">
                   <div class="space-y-4">
                       <div>
                           <label for="name" class="block text-sm font-medium text-slate-300">Full Name</label>
                           <input type="text" id="name" name="name" required class="mt-1 block w-full bg-slate-700 border border-slate-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-green-500 focus:border-green-500">
                       </div>
                       <div>
                           <label for="phone" class="block text-sm font-medium text-slate-300">Phone Number</label>
                           <input type="tel" id="phone" name="phone" required class="mt-1 block w-full bg-slate-700 border border-slate-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-green-500 focus:border-green-500">
                       </div>
                       <div>
                           <label for="email" class="block text-sm font-medium text-slate-300">Email Address</label>
                           <input type="email" id="email" name="email" required class="mt-1 block w-full bg-slate-700 border border-slate-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-green-500 focus:border-green-500">
                       </div>
                   </div>
                   <p id="form-error" class="text-red-400 text-sm mt-4 hidden"></p>
                   <button type="submit" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition">Submit Request</button>
               </form>
           </div>
           <div id="success-message" class="hidden text-center">
                <div class="mx-auto bg-green-500/20 rounded-full h-16 w-16 flex items-center justify-center">
                    <i data-lucide="check" class="text-green-400 h-8 w-8"></i>
                </div>
                <h2 class="text-2xl font-bold text-white mt-6">Thank You!</h2>
                <p class="text-slate-400 mt-2">Our pitch deck has been sent to your email. We look forward to connecting with you soon.</p>
           </div>
        </div>
    </div>
    
    <!-- Documentation Modal -->
    <div id="doc-modal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
        <div id="doc-modal-content" class="bg-slate-800 rounded-xl p-8 max-w-3xl w-full border border-slate-700 relative max-h-[90vh] overflow-y-auto">
           <button id="doc-modal-close" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i data-lucide="x"></i></button>
           <!-- Content will be injected here -->
        </div>
    </div>

    <script>
        // Lucide Icons
        lucide.createIcons();

        // Mobile Menu Toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- Wiring Diagram Logic ---
        const wiringDiagramContainer = document.getElementById('wiring-diagram-container');
        if (wiringDiagramContainer) {
            wiringDiagramContainer.innerHTML = `
                <div class="flex flex-col lg:flex-row gap-8">
                    <div id="diagram-container-inner" class="flex-grow relative">
                        <svg id="connector-svg" class="absolute top-0 left-0 w-full h-full z-0"></svg>
                        <div class="relative z-10 space-y-8">
                            <div class="p-4 border border-slate-700 rounded-lg">
                                <h2 class="text-center font-semibold text-green-400 mb-4">UI Components (Next.js)</h2>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    <div id="ui-dashboard" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">BI Dashboard</div>
                                    <div id="ui-crm-list" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Customer List</div>
                                    <div id="ui-crm-detail" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Customer Detail</div>
                                    <div id="ui-inventory-hub" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Inventory Hub</div>
                                    <div id="ui-promo-card" class="component bg-slate-800 p-3 rounded-lg text-center text-sm col-span-2 md:col-span-1">AI Promotion Card</div>
                                </div>
                            </div>
                            <div class="p-4 border border-slate-700 rounded-lg">
                                <h2 class="text-center font-semibold text-green-400 mb-4">Backend Services</h2>
                                <div class="flex justify-center flex-wrap gap-4">
                                    <div id="api-django" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Django Core API</div>
                                    <div id="api-analytics" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Python Analytics Engine</div>
                                </div>
                            </div>
                            <div class="p-4 border border-slate-700 rounded-lg">
                                <h2 class="text-center font-semibold text-green-400 mb-4">Data Entities (PostgreSQL)</h2>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    <div id="db-customer" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Customer</div>
                                    <div id="db-product" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Product</div>
                                    <div id="db-order" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">Order</div>
                                    <div id="db-ai-insights" class="component bg-slate-800 p-3 rounded-lg text-center text-sm">AI Insights</div>
                                    <div id="db-compliance" class="component bg-slate-800 p-3 rounded-lg text-center text-sm col-span-2 md:col-span-1">Compliance Log</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-1/3 lg:max-w-md">
                        <div id="info-panel" class="info-panel sticky top-24 bg-slate-800/50 backdrop-blur-md border border-slate-700 rounded-lg p-6 h-[60vh] overflow-y-auto">
                            <h3 id="info-title" class="text-xl font-bold text-white mb-4">Select a Component</h3>
                            <div id="info-content" class="text-slate-300 space-y-4"></div>
                        </div>
                    </div>
                </div>
            `;
            
            const components = {
                'ui-dashboard': { title: 'BI Dashboard', description: 'Main overview page showing KPIs. Aggregates data from multiple sources for a high-level business health snapshot.', tech: ['Next.js', 'React', 'Recharts'], dependencies: ['api-django'] },
                'ui-crm-list': { title: 'Customer List Page', description: 'Displays a searchable table of all customers, including the AI-generated churn risk score to prioritize outreach.', tech: ['Next.js', 'React'], dependencies: ['api-django'] },
                'ui-crm-detail': { title: 'Customer Detail Page', description: 'A comprehensive view of a single customer, including purchase history, compliance status, and detailed AI insights.', tech: ['Next.js', 'Dynamic Routing'], dependencies: ['api-django', 'ui-promo-card'] },
                'ui-inventory-hub': { title: 'Inventory Hub', description: 'Provides a real-time view of all products, stock levels, sales velocity, and margins. Integrates AI-driven sales strategy suggestions.', tech: ['Next.js', 'React'], dependencies: ['api-django', 'api-analytics'] },
                'ui-promo-card': { title: 'AI Promotion Card', description: 'A dynamic UI component on the Customer Detail Page that displays a personalized promotion, generated by the Analytics Engine.', tech: ['React', 'Lucide Icons'], dependencies: ['api-analytics'] },
                'api-django': { title: 'Django Core API (DRF)', description: 'The primary backend service for core business logic. It handles CRUD operations, user authentication, and Shopify integration.', tech: ['Python', 'Django', 'DRF'], dependencies: ['db-customer', 'db-product', 'db-order', 'db-ai-insights', 'db-compliance'] },
                'api-analytics': { title: 'Python Analytics Engine (FastAPI)', description: 'A specialized microservice that ingests data to perform complex analysis, generate promotions, and create sales strategies.', tech: ['Python', 'FastAPI', 'Pandas'], dependencies: ['db-customer', 'db-product', 'db-ai-insights'] },
                'db-customer': { title: 'Customer Entity', description: 'Stores all core customer information, including PII, location, and compliance status. The central table for the CRM.', tech: ['PostgreSQL'], dependencies: [] },
                'db-product': { title: 'Product Entity', description: 'Contains details for every product/SKU, including cannabis-specific attributes, pricing, cost of goods, and stock levels.', tech: ['PostgreSQL'], dependencies: [] },
                'db-order': { title: 'Order Entity', description: 'Tracks all transactional data, linking customers to the products they purchased. Crucial for calculating LTV.', tech: ['PostgreSQL'], dependencies: ['db-customer', 'db-product'] },
                'db-ai-insights': { title: 'AI Insights Entity', description: 'A dedicated table to store the output of ML models, like churn risk and predicted LTV.', tech: ['PostgreSQL', 'JSONB'], dependencies: ['db-customer'] },
                'db-compliance': { title: 'Compliance Log', description: 'An append-only table that creates an immutable audit trail of all compliance-related actions.', tech: ['PostgreSQL'], dependencies: ['db-customer'] },
            };

            const diagramContainerInner = document.getElementById('diagram-container-inner');
            const svg = document.getElementById('connector-svg');
            const infoTitle = document.getElementById('info-title');
            const infoContent = document.getElementById('info-content');
            let activeComponentId = null;

            function getElementCenter(el) {
                const rect = el.getBoundingClientRect();
                const containerRect = diagramContainerInner.getBoundingClientRect();
                return { x: rect.left - containerRect.left + rect.width / 2, y: rect.top - containerRect.top + rect.height / 2 };
            }

            function drawLines() {
                if (!svg || !diagramContainerInner) return;
                svg.innerHTML = '';
                const containerRect = diagramContainerInner.getBoundingClientRect();
                svg.setAttribute('width', containerRect.width);
                svg.setAttribute('height', containerRect.height);

                for (const id in components) {
                    const sourceEl = document.getElementById(id);
                    if (!sourceEl) continue;
                    components[id].dependencies.forEach(depId => {
                        const targetEl = document.getElementById(depId);
                        if (!targetEl) return;
                        const sourcePos = getElementCenter(sourceEl);
                        const targetPos = getElementCenter(targetEl);
                        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                        line.setAttribute('x1', sourcePos.x);
                        line.setAttribute('y1', sourcePos.y);
                        line.setAttribute('x2', targetPos.x);
                        line.setAttribute('y2', targetPos.y);
                        line.classList.add('connector-line');
                        line.dataset.source = id;
                        line.dataset.target = depId;
                        svg.appendChild(line);
                    });
                }
            }
            
            function updateInfoPanel(id) {
                const component = components[id];
                infoTitle.textContent = component.title;
                let techHtml = component.tech.map(t => `<span class="tech-tag inline-block bg-green-900/50 text-green-300 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded">${t}</span>`).join('');
                infoContent.innerHTML = `<p class="mb-4">${component.description}</p><div><h4 class="font-semibold text-slate-100 mb-2">Key Technologies:</h4><div class="flex flex-wrap gap-2">${techHtml}</div></div>`;
            }

            function setActiveComponent(id) {
                if (activeComponentId) document.getElementById(activeComponentId)?.classList.remove('active');
                document.querySelectorAll('.connector-line').forEach(l => l.classList.remove('active'));
                if (id && components[id]) {
                    activeComponentId = id;
                    document.getElementById(id).classList.add('active');
                    updateInfoPanel(id);
                    document.querySelectorAll('.connector-line').forEach(line => {
                        if (line.dataset.source === id || line.dataset.target === id) line.classList.add('active');
                    });
                } else {
                    activeComponentId = null;
                    infoTitle.textContent = 'Select a Component';
                    infoContent.innerHTML = '<p>Click on any component to see its description and connections.</p>';
                }
            }

            Object.keys(components).forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('click', e => { e.stopPropagation(); setActiveComponent(id); });
            });
            
            document.body.addEventListener('click', () => setActiveComponent(null));
            window.addEventListener('resize', drawLines);
            setTimeout(() => { drawLines(); setActiveComponent('ui-dashboard'); }, 100);
        }

        // --- Documentation Gateway Logic ---
        const docGateway = document.getElementById('doc-gateway');
        const docModal = document.getElementById('doc-modal');
        const docModalContent = document.getElementById('doc-modal-content');
        const docModalClose = document.getElementById('doc-modal-close');

        if (docGateway && docModal && docModalContent && docModalClose) {
            const docData = {
                kpiCard: {
                    title: 'KPICard Component',
                    description: 'A reusable card for displaying key performance indicators. It dynamically changes color and icon based on the data trend (up, down, or neutral).',
                    code: `
    <pre><code class="language-jsx" style="background: #0d1117; color: #c9d1d9; padding: 1em; border-radius: 8px; display: block; overflow-x: auto;">
    &lt;KPICard 
      title="Daily Revenue" 
      value="$12,847" 
      change={8.3} 
      changeType="up" 
      Icon={DollarSign} 
    /&gt;
    </code></pre>`
                },
                aiInsight: {
                    title: 'AIInsight Component',
                    description: 'A specialized component for displaying actionable alerts and opportunities generated by the Python Analytics Engine. It adapts its appearance based on the insight type (opportunity, warning, or info).',
                    code: `
    <pre><code class="language-jsx" style="background: #0d1117; color: #c9d1d9; padding: 1em; border-radius: 8px; display: block; overflow-x: auto;">
    &lt;AIInsight 
      type="opportunity"
      title="Pricing Opportunity"
      description="Blue Dream 1/8th is underpriced..." 
    /&gt;
    </code></pre>`
                },
                dashboardLayout: {
                    title: 'DashboardLayout Component',
                    description: 'A higher-order component that provides the main application structure, including the sticky header and main navigation, ensuring a consistent layout across all dashboard pages.',
                    code: `
    <pre><code class="language-jsx" style="background: #0d1117; color: #c9d1d9; padding: 1em; border-radius: 8px; display: block; overflow-x: auto;">
    &lt;DashboardLayout&gt;
      {/* Page content goes here */}
    &lt;/DashboardLayout&gt;
    </code></pre>`
                }
            };

            Object.keys(docData).forEach(key => {
                const card = document.createElement('div');
                card.className = 'doc-card bg-slate-800/50 p-6 rounded-xl border border-slate-700 cursor-pointer';
                card.innerHTML = `<h3 class="text-xl font-bold text-white">${docData[key].title}</h3><p class="mt-2 text-slate-400">${docData[key].description.substring(0, 100)}...</p>`;
                card.addEventListener('click', () => {
                    docModalContent.innerHTML = `
                        <button id="doc-modal-close-inner" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i data-lucide="x"></i></button>
                        <h2 class="text-2xl font-bold text-white mb-4">${docData[key].title}</h2>
                        <p class="text-slate-300 mb-6">${docData[key].description}</p>
                        <h4 class="font-semibold text-slate-100 mb-2">Usage Example:</h4>
                        ${docData[key].code}
                    `;
                    lucide.createIcons();
                    docModal.classList.remove('hidden');
                    docModal.classList.add('flex');
                    document.getElementById('doc-modal-close-inner').addEventListener('click', () => docModal.classList.add('hidden'));
                });
                docGateway.appendChild(card);
            });

            docModalClose.addEventListener('click', () => docModal.classList.add('hidden'));
            docModal.addEventListener('click', (e) => {
                if (e.target === docModal) {
                    docModal.classList.add('hidden');
                }
            });
        }

        // --- Pitch Deck Modal Logic ---
        const requestButton = document.getElementById('request-deck-button');
        const pitchDeckModal = document.getElementById('pitch-deck-modal');
        const pitchDeckModalClose = document.getElementById('pitch-deck-modal-close');
        const pitchDeckForm = document.getElementById('pitch-deck-form');
        const formContainer = document.getElementById('form-container');
        const successMessage = document.getElementById('success-message');
        const formError = document.getElementById('form-error');

        if (requestButton && pitchDeckModal && pitchDeckModalClose && pitchDeckForm) {
            requestButton.addEventListener('click', () => {
                pitchDeckModal.classList.remove('hidden');
                pitchDeckModal.classList.add('flex');
            });

            const closeModal = () => {
                pitchDeckModal.classList.add('hidden');
                // Reset form for next time
                setTimeout(() => {
                    formContainer.classList.remove('hidden');
                    successMessage.classList.add('hidden');
                    pitchDeckForm.reset();
                    formError.classList.add('hidden');
                }, 300);
            };

            pitchDeckModalClose.addEventListener('click', closeModal);
            pitchDeckModal.addEventListener('click', (e) => {
                if (e.target === pitchDeckModal) {
                    closeModal();
                }
            });

            pitchDeckForm.addEventListener('submit', (e) => {
                e.preventDefault();
                formError.classList.add('hidden');

                const name = document.getElementById('name').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('email').value;

                // Simple validation
                if (!name || !phone || !email) {
                    formError.textContent = 'All fields are required.';
                    formError.classList.remove('hidden');
                    return;
                }
                
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    formError.textContent = 'Please enter a valid email address.';
                    formError.classList.remove('hidden');
                    return;
                }

                // On success
                formContainer.classList.add('hidden');
                successMessage.classList.remove('hidden');
                lucide.createIcons(); // Re-render the check icon
            });
        }

    </script>
</body>
</html>
